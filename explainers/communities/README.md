# Title: Communities Mini-Application

## Author(s):
Bastyon Development Team

## Status of this Document
Current Status: ACTIVE

Current venue: 
- https://github.com/pocketnetteam/pocketnet.gui
- https://github.com/pocketnetteam/pocketnet.proxy
- [New] Communities Server Repository (to be created)
- [New] Communities Migrator Repository (to be created)

Current version: 1.0.0

## Introduction
Проект "Сообщества" представляет собой комплексное решение для создания и управления децентрализованными сообществами в экосистеме Bastyon. Проект состоит из четырех основных компонентов, обеспечивающих полный цикл работы с сообществами.

## Goals
1. Создание полноценной инфраструктуры для децентрализованных сообществ
2. Реализация системы модерации на основе консенсуса
3. Обеспечение эффективного хранения и обработки данных сообществ
4. Интеграция с существующей блокчейн-инфраструктурой
5. Предоставление удобного пользовательского интерфейса

## Non Goals
1. Замена существующей функциональности основной платформы
2. Централизованное управление контентом
3. Реализация функций, не связанных с сообществами

## Proposal

### Архитектура системы

1. **Frontend (pocketnet.gui)**
   - Полностью реализован
   - Интерфейс для взаимодействия с сообществами
   - Управление контентом и модерацией

2. **Proxy (pocketnet.proxy)**
   - Требует доработки
   - Кастомная реализация репозитория API
   - Интеграция с основной сетью

3. **Migrator (Новый компонент)**
   - Мониторинг блокчейна
   - Фильтрация контента
   - Система модерации на основе консенсуса
   - Синхронизация данных

4. **Server (Новый компонент)**
   - Управление основной базой данных
   - Хранение всех компонентов социальной сети
   - Система прав и модерации
   - API для взаимодействия с другими компонентами

### Структура данных

Система использует MongoDB для хранения данных и включает следующие основные коллекции:

1. Communities
2. CommunityMembers
3. CommunityContent
4. CommunityComments
5. CommunityActions
6. CommunityModeration
7. CommunityInvites

Дополнительно для работы с основным контентом:

1. Transactions
2. Users
3. Posts
4. Comments
5. Social
6. Actions
7. Feed

## Code/Pseudocode
[db.md](db.md)

## Examples
Примеры использования API и взаимодействия компонентов будут добавлены по мере разработки.

## Alternatives Considered
1. Использование существующей инфраструктуры без выделения отдельного сервера
2. Полностью децентрализованное хранение данных сообществ
3. Упрощенная система модерации без консенсуса

## Considerations

### Privacy
- Шифрование приватных данных сообществ
- Защита персональных данных участников
- Контроль доступа к закрытым сообществам

### Security
- Многоуровневая система модерации
- Защита от спама и злоупотреблений
- Верификация транзакций и действий пользователей

### Performance
- Оптимизированная структура базы данных
- Эффективное кэширование
- Балансировка нагрузки между компонентами

### Other
- Масштабируемость системы
- Совместимость с существующей инфраструктурой
- Удобство поддержки и обновления

## Questions

### Open Questions
1. Механизм синхронизации данных между нодами
2. Детали реализации консенсуса модераторов
3. Стратегия масштабирования базы данных

### Answered Questions
1. Структура базы данных определена
2. Основные компоненты системы определены
3. Механизм взаимодействия с блокчейном определен