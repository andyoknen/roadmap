# Title: Communities Mini-Application

## Author(s):
Bastyon Development Team

## Status of this Document
Current Status: ACTIVE

Current venue: 
- https://github.com/pocketnetteam/pocketnet.gui
- https://github.com/pocketnetteam/pocketnet.proxy
- [New] Communities Server Repository (to be created)
- [New] Communities Migrator Repository (to be created)

Current version: 1.0.0

## Introduction
Проект "Сообщества" представляет собой комплексное решение для создания и управления децентрализованными сообществами в экосистеме Bastyon. Проект состоит из четырех основных компонентов, обеспечивающих полный цикл работы с сообществами.

## Goals
1. Создание полноценной инфраструктуры для децентрализованных сообществ
2. Реализация системы модерации на основе консенсуса
3. Обеспечение эффективного хранения и обработки данных сообществ
4. Интеграция с существующей блокчейн-инфраструктурой
5. Предоставление удобного пользовательского интерфейса

## Non Goals
1. Замена существующей функциональности основной платформы
2. Централизованное управление контентом
3. Реализация функций, не связанных с сообществами

## Proposal

### Архитектура системы

1. **Frontend (pocketnet.gui)**
   - Полностью реализован
   - Интерфейс для взаимодействия с сообществами
   - Управление контентом и модерацией

2. **Proxy (pocketnet.proxy)**
   - Требует доработки
   - Кастомная реализация репозитория API (Социальный АПИ должен взаимодействовать со своим сервером, денежный функционал и работа с транзакциями остается неизменной)

3. **Migrator (Новый компонент)**
   - Мониторинг блокчейна
   - Синхронизация данных
   - Фильтрация контента
   - Система модерации на основе консенсуса

4. **Server (Новый компонент)**
   - Управление основной базой данных
   - Хранение всех компонентов социальной сети (Идентично БД Pocketcoin)
   - Система прав и модерации
   - API для взаимодействия с другими компонентами (Идентично API Pocketcoin с небольшими изменениями для поддержки функционала сообществ)

### Структура данных

Система может использовать MongoDB для хранения данных и включает следующие основные коллекции:

1. Communities
2. CommunityMembers
3. CommunityContent
4. CommunityComments
5. CommunityActions
6. CommunityModeration
7. CommunityInvites

Дополнительно для работы с основным контентом предлагается использовать существующую структуру данных блокчейна Pocketcoin для минимизации разработки - https://github.com/pocketnetteam/pocketnet.core/tree/0.22/src/pocketdb/migrations

Таким образом мы дублируем БД Pocketcoin, но сохраняем только данные, относящиеся к сообществу. Рассчитываемые значения (рейтинги, оценки, подписки и баны - можно продублировать или создать новые).

Разработка нового АПИ не требуется, можно использовать существующие SQL запросы с небольшими модификациями (зависит от степени изменения структуры БД).

## Code/Pseudocode
[db.md](db.md)
